#!/usr/bin/env node

const readline = require("readline");
const kahoot = require("kahoot.js-updated");
const client = new kahoot();

const artStr = decodeURI(
  "%0A%20%20%20%20%20%20%20...%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%20%20%20%20%20%20%20%20%20%20%20...%20%20%20%20%20..%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20%20%20%20%0A%20%20%20.xH8%25%22%60%60%60%22%25.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.uef%5E%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20:8%20%20%20%20%20%20%20%20%20.=*8888x%20%3C%22?88h.%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20:8%20%20%20%20%0A%20%20x888~%20xnHhx.%20%22.%20%20%20%20%20%20%20%20%20%20%20%20%20%20:d88E%20%20%20%20%20%20%20%20%20%20%20%20%20%20u.%20%20%20%20%20%20%20%20%20%20u.%20%20%20%20%20%20.88%20%20%20%20%20%20%20%20X%3E%20%20'8888H%3E%20'8888%20%20%20%20%20%20%20%20%20%20u.%20%20%20%20%20%20.88%20%20%20%20%0A%20X888X%208**8888k%20%60.%20%20%20%20%20%20%20u%20%20%20%20%20%60888E%20%20%20%20%20%20%20%20...ue888b%20%20%20...ue888b%20%20%20%20:888ooo%20%20%20%20'88h.%20%608888%20%20%208888%20%20%20%20...ue888b%20%20%20%20:888ooo%20%0A%208888X%3C~%20%20%608888L%20!%20%20%20%20us888u.%20%20%20888E%20.z8k%20%20%20888R%20Y888r%20%20888R%20Y888r%20-*8888888%20%20%20%20'8888%20'8888%20%20%20%20%2288%3E%20%20%20888R%20Y888r%20-*8888888%20%0A%2088888!%20%20%20.!8*%22%22%20%60%20.@88%20%228888%22%20%20888E~?888L%20%20888R%20I888%3E%20%20888R%20I888%3E%20%20%208888%20%20%20%20%20%20%20%20%60888%20'8888.xH888x.%20%20%20888R%20I888%3E%20%20%208888%20%20%20%20%0A%20%6088888!%22*888x%20%20%20%20%209888%20%209888%20%20%20888E%20%20888E%20%20888R%20I888%3E%20%20888R%20I888%3E%20%20%208888%20%20%20%20%20%20%20%20%20%20X%22%20:88*~%20%20%60*8888%3E%20%20888R%20I888%3E%20%20%208888%20%20%20%20%0A%20%20%60*8888%20%208888L%20%20%20%209888%20%209888%20%20%20888E%20%20888E%20%20888R%20I888%3E%20%20888R%20I888%3E%20%20%208888%20%20%20%20%20%20%20%20~%22%20%20%20!%22%60%20%20%20%20%20%20%22888%3E%20%20888R%20I888%3E%20%20%208888%20%20%20%20%0A%20.x.%60888X%20X888X%20%20%20%209888%20%209888%20%20%20888E%20%20888E%20u8888cJ888%20%20u8888cJ888%20%20%20.8888Lu=%20%20%20%20%20%20.H8888h.%20%20%20%20%20%20?88%20%20u8888cJ888%20%20%20.8888Lu=%20%0A'888%3E%20%258X%20!8888..-%209888%20%209888%20%20%20888E%20%20888E%20%20%22*888*P%22%20%20%20%20%22*888*P%22%20%20%20%20%5E%25888*%20%20%20%20%20%20%20:%22%5E%2288888h.%20%20%20%20'!%20%20%20%20%22*888*P%22%20%20%20%20%5E%25888*%20%20%20%0A'888%20%20%208%20%20'8888%25%60%20%20%22888*%22%22888%22%20m888N=%20888%3E%20%20%20%20'Y%22%20%20%20%20%20%20%20%20%20'Y%22%20%20%20%20%20%20%20%20%20'Y%22%20%20%20%20%20%20%20%20%5E%20%20%20%20%2288888hx.+%22%20%20%20%20%20%20%20'Y%22%20%20%20%20%20%20%20%20%20'Y%22%20%20%20%20%0A%20%20%22*==%22%20%20%20%20%20%22%22%20%20%20%20%20%20%5EY%22%20%20%20%5EY'%20%20%20%60Y%22%20%20%20888%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5E%22**%22%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20J88%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20@%25%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20:%22%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A"
);

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout
});

console.log(artStr);
console.log("\n");
console.log("\n");
console.log("\n");
console.log("\n");
console.log("\n");

//Remeber only close readline in last nested rl.question.
rl.question("What do you want to do now?\n", answer => {
  if (answer.match("Join Game")) {
    //rl.close();
    rl.question("Enter Game Pin: ", pin => {
      rl.question("Enter your name: ", name => {
        rl.close();
        console.log(pin);
        console.log(name);
        client.join(pin, name);
        client.on("joined", () => {
          console.log("I joined the Kahoot!");
        });
        client.on("questionStart", question => {
          /* TODO: 
          rl.question("Guess now: ", guess => {
            question.answer(guess);
          });*/
          question.answer(Math.floor(Math.random() * 3));
        });
        client.on("quizEnd", () => {
          console.log("The quiz has ended.");
        });
        // TODO: kahoot.join(answer, name);
      });
    });
  }
});
